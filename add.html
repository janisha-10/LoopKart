<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Add Material | LoopKart</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100 min-h-screen overflow-y-auto">

<!-- HEADER -->
<header class="bg-white shadow px-6 py-4 flex items-center justify-between sticky top-0 z-10">
  <h1 class="font-semibold text-lg">Add Material for Selling</h1>
  <a href="dashboard.html" class="text-blue-500 font-medium">← Back</a>
</header>

<main class="p-6 flex justify-center">
  <div class="w-full max-w-2xl bg-white rounded-xl shadow p-6 space-y-5">

    <input id="name" placeholder="Product name"
      class="w-full px-4 py-2 border rounded-lg" />

    <select id="material" class="w-full px-4 py-2 border rounded-lg">
      <option>Select material</option>
      <option>Plastic</option>
      <option>Metal</option>
      <option>Paper</option>
      <option>Glass</option>
      <option>Electronic Waste</option>
      <option>Textile</option>
      <option>Wood</option>
    </select>

    <select id="condition" class="w-full px-4 py-2 border rounded-lg">
      <option>Select condition</option>
      <option>Excess</option>
      <option>Scrap</option>
      <option>Reusable</option>
    </select>

    <textarea id="details" placeholder="Optional details"
      class="w-full px-4 py-2 border rounded-lg"></textarea>

    <div class="flex gap-4">
      <input id="price" type="number" placeholder="Price"
        class="w-2/3 px-4 py-2 border rounded-lg" />
      <select id="priceUnit" class="w-1/3 px-4 py-2 border rounded-lg">
        <option>₹ / kg</option>
        <option>₹ / ton</option>
        <option>₹ / unit</option>
      </select>
    </div>

    <div class="flex gap-4">
      <input id="quantity" type="number" placeholder="Quantity"
        class="w-2/3 px-4 py-2 border rounded-lg" />
      <select id="quantityUnit" class="w-1/3 px-4 py-2 border rounded-lg">
        <option>kg</option>
        <option>ton</option>
        <option>units</option>
      </select>
    </div>

    <button onclick="uploadMaterial()"
      class="w-full bg-blue-500 text-white py-3 rounded-lg font-semibold">
      Upload Material
    </button>

  </div>
</main>

<!-- POPUP -->
<div id="popup" class="fixed inset-0 bg-black/50 hidden items-center justify-center">
  <div class="bg-white rounded-xl p-6 text-center w-72">
    <h2 class="text-lg font-semibold mb-2">✅ Done</h2>
    <p class="text-gray-600 mb-4">Material uploaded successfully</p>
    <button onclick="goDashboard()"
      class="bg-blue-500 text-white px-4 py-2 rounded-lg">
      Go to Dashboard
    </button>
  </div>
</div>

<script>
if (!localStorage.getItem("username")) {
  localStorage.setItem("username", "DemoSeller");
}

function uploadMaterial() {
  // Grab input elements properly
  const nameInput = document.getElementById("name");
  const materialInput = document.getElementById("material");
  const conditionInput = document.getElementById("condition");
  const detailsInput = document.getElementById("details");
  const priceInput = document.getElementById("price");
  const priceUnitInput = document.getElementById("priceUnit");
  const quantityInput = document.getElementById("quantity");
  const quantityUnitInput = document.getElementById("quantityUnit");

  // Validate required fields
  if (!nameInput.value || materialInput.value === "Select material" || conditionInput.value === "Select condition") {
    alert("Please fill in all required fields");
    return;
  }

  const item = {
    id: Date.now(),
    name: nameInput.value,
    material: materialInput.value,
    condition: conditionInput.value,
    details: detailsInput.value,
    price: priceInput.value,
    priceUnit: priceUnitInput.value,
    quantity: quantityInput.value,
    quantityUnit: quantityUnitInput.value,
    seller: localStorage.getItem("username")
  };

  const items = JSON.parse(localStorage.getItem("materials")) || [];
  items.push(item);
  localStorage.setItem("materials", JSON.stringify(items));

  // Show popup
  const popup = document.getElementById("popup");
  popup.classList.remove("hidden");
  popup.classList.add("flex");

  // Optional: clear form
  nameInput.value = "";
  materialInput.value = "Select material";
  conditionInput.value = "Select condition";
  detailsInput.value = "";
  priceInput.value = "";
  priceUnitInput.value = "₹ / kg";
  quantityInput.value = "";
  quantityUnitInput.value = "kg";
}

function goDashboard() {
  window.location.href = "dashboard.html";
}
</script>

</body>
</html>
