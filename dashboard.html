<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" href="./images/logo.png" type="image/png">
  <title>Dashboard | LoopKart</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard | LoopKart</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: "#0EA5E9",
            dark: "#0B1C2D",
            blackdash: "#0F172A"
          }
        }
      }
    }
  </script>
</head>

<body class="bg-gray-100 min-h-screen flex flex-col">

<!-- TOP NAV -->
<header class="bg-white shadow px-6 py-4 flex items-center justify-between">
  <div class="flex items-center gap-3">
    <div class="w-10 h-10 bg-dark text-white flex items-center justify-center rounded font-bold">
      <img src="./images/logo.png" width="30">
    </div>
    <span class="font-semibold text-lg">LoopKart</span>
  </div>

  <div class="flex gap-6 text-sm font-medium">
    <a href="dashboard.html"><img src="./images/home.png" width="30"></a>
    <a href="profile.html"><img src="./images/profile.png" width="30"></a>
    <a href="info.html"><img src="./images/information.png" width="30"></a>
  </div>
</header>

<!-- ACTION BAR -->
<section class="px-6 py-4">
  <div class="bg-white rounded-xl shadow p-4 flex gap-4 flex-wrap">
    <a href="request.html" class="px-5 py-2 bg-primary text-white rounded-lg">üìÑ Request</a>
    <a href="upload.html" class="px-5 py-2 bg-gray-200 rounded-lg">‚¨Ü Upload</a>
    <a href="add.html" class="px-5 py-2 bg-gray-200 rounded-lg">‚ûï Add</a>
 
  </div>
</section>

<!-- MAIN -->
<main class="px-6 py-6 flex-1 space-y-6">

  <!-- SEARCH -->
  <div class="bg-white rounded-xl shadow p-6 space-y-4">
    <h1 class="text-2xl font-semibold">
      Welcome, <span id="username" class="text-primary"></span> üëã
    </h1>

    <div class="relative max-w-md">
      <input id="searchInput"
        placeholder="Search materials..."
        class="w-full pl-10 pr-4 py-2 border rounded-lg" />
      <span class="absolute left-3 top-2.5">üîç</span>
    </div>
  </div>

  <!-- MATERIAL LIST -->
  <div id="materialList"
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
  </div>

</main>

<!-- FOOTER -->
<section class="bg-blackdash text-white px-6 py-6">
  <p class="text-center text-sm">¬© LoopKart</p>
</section>

<script>
/* USER */
const currentUser = localStorage.getItem("username") || "Anonymous";
document.getElementById("username").innerText = currentUser;

/* MATERIALS */
let materials = JSON.parse(localStorage.getItem("materials")) || [];
const list = document.getElementById("materialList");
const searchInput = document.getElementById("searchInput");

function render(items) {
  list.innerHTML = "";

  if (items.length === 0) {
    list.innerHTML = `<p class="text-gray-500">No materials found.</p>`;
    return;
  }

  items.forEach(i => {
    list.innerHTML += `
      <div class="bg-white rounded-xl shadow p-4 space-y-1">
        <h3 class="font-semibold text-lg">${i.name}</h3>
        <p class="text-sm text-gray-600">${i.material} ‚Ä¢ ${i.condition}</p>
        <p class="text-sm">${i.details || "No details"}</p>
        <p class="font-medium mt-2">‚Çπ${i.price} ${i.priceUnit}</p>
        <p class="text-sm text-gray-500">Qty: ${i.quantity} ${i.quantityUnit}</p>
        <p class="text-xs text-gray-400">Seller: ${i.seller}</p>

        ${
          i.seller === currentUser
            ? `<button onclick="removeItem(${i.id})"
                 class="text-red-500 text-sm mt-2 hover:underline">
                 ‚ùå Delete
               </button>`
            : ""
        }
      </div>`;
  });
}

function removeItem(id) {
  materials = materials.filter(m => m.id !== id);
  localStorage.setItem("materials", JSON.stringify(materials));
  render(materials);
}

searchInput.addEventListener("input", () => {
  const q = searchInput.value.toLowerCase();
  render(
    materials.filter(m =>
      m.name.toLowerCase().includes(q) ||
      m.material.toLowerCase().includes(q)
    )
  );
});

render(materials);
</script>

</body>
</html>
